name: hmf_and_hbf_tinker
version: 1
purpose: "Compute the Tinker+10's halo mass and halo bias functions, given a set of cosmological parameters."
url: ""
interface: hmf_and_hbf_tinker.py
attribution: ["Maria Cristina Fortuna, based on Steven Murray's hmf code"]
rules: []
cite: ["Murray, Power and Robotham (2013)"]
assumptions:
    - "See Tinker et al. 2010 for ranges of validity and relevant assumptions."

explanation: |
    "This module computes the Tinker's HMF through the Steven Murray python package hmf
    and the associated Halo Bias function, for a given range in redshift.
    
    At the moment this module is designed to work in this particular pipeline.
    To wrap it properly in CosmoSIS more work is needed. It also requires a
    permission from the authors. As I haven't contacted them yet, this must be
    considered only for a private usage.

    The module also includes an option to compute the halo bias from Tinker+10.
    
    Since the halo mass function requires sigma_8, if you are fitting for cosmological
    parameters, you need to use the sigma8_rescale module together with this.
    
    Note that currently the module is NOT using camb computed by the pipeline (hope to 
    fix it soon).
    
    For more information on hmf, see: https://hmf.readthedocs.io/en/latest/index.html
    "

# List of parameters that can go in the params.ini file in the section for this module    
params: 
    log_mass_min: "real, log10 of the minimum mass to save"
    log_mass_max: "real, log10 of the maximum mass to save"
    nmass: "integer, number of mass bins to save"
    nz: "integer, number of z values to save"
    zmin: "real, min redshift value"
    zmax: "real, max redshift value"
    do_tensors: "logical, compute the halo bias (Tinker+10)"

#Inputs for a given choice of a parameter, from the values.ini or from other modules
#If no such choices, just do one of these omitting mode=something part:
inputs:
    cosmological_parameters:
        hubble: "Hubble parameter H0 (km/s/Mpc)"
        omega_m: "real, cold dark matter density fraction today"
        omega_b: "real, baryon density fraction today "
        sigma_8: "real, re-scaled sigma_8 (sigma8_rescale module required)"
        n_s:  "real, scalar spectral index (ignored in background/thermal mode)"
outputs:
    hmf:
        m_h: "1D real vector, log-spaced halo masses in M_sun/h"
        z: "1D real vector, redshift"
        dndlnmh: "2D real vector, the halo mass function dn_dlnM"
    halobias:
        m_h: "1D real vector, log-spaced halo masses in M_sun/h"
        z: "1D real vector, redshift"
        b_hb: "2D real vector, the halo bias function b(M)"

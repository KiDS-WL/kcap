[pipeline]
modules = sample_ln_As correlated_dz_priors one_parameter_hmcode camb approximate_P_gm extrapolate_power load_nz_fits source_photoz_bias magnification_alphas projection add_magnification bandpower_ggl scale_cuts 2x2pt_like
values = runs/mocks/magnification/mag_nE_magnification_alpha_3.0/config/values.ini
priors = runs/mocks/magnification/mag_nE_magnification_alpha_3.0/config/priors.ini
likelihoods = 2x2pt_like
extra_output = cosmological_parameters/S_8 cosmological_parameters/sigma_8 cosmological_parameters/omega_m cosmological_parameters/omega_nu cosmological_parameters/omega_lambda cosmological_parameters/cosmomc_theta nofz_shifts/bias_1 nofz_shifts/bias_2 nofz_shifts/bias_3 nofz_shifts/bias_4 nofz_shifts/bias_5
quiet = F
timing = T
debug = F

[runtime]
sampler = multinest

[output]
filename = runs/mocks/magnification/mag_nE_magnification_alpha_3.0/chain/samples_mag_nE_magnification_alpha_3.0.txt
format = text

[multinest]
max_iterations = 1000000
multinest_outfile_root = runs/mocks/magnification/mag_nE_magnification_alpha_3.0/chain/multinest/multinest_mag_nE_magnification_alpha_3.0_
resume = T
live_points = 250
efficiency = 0.3
tolerance = 1.0e-2
constant_efficiency = F

[sample_ln_As]
file = ./utils/sample_ln_As.py

[correlated_dz_priors]
file = ./utils/correlated_priors.py
uncorrelated_parameters = nofz_shifts/p_1 nofz_shifts/p_2 nofz_shifts/p_3 nofz_shifts/p_4 nofz_shifts/p_5
output_parameters = nofz_shifts/bias_1 nofz_shifts/bias_2 nofz_shifts/bias_3 nofz_shifts/bias_4 nofz_shifts/bias_5
covariance = runs/mocks/magnification/mag_nE_magnification_alpha_3.0/data/KiDS/DIR_cov.asc

[one_parameter_hmcode]
file = ./utils/one_parameter_hmcode.py
a_0 = 0.98
a_1 = -0.12

[camb]
file = ./cosmosis-standard-library/boltzmann/pycamb/camb_interface.py
do_reionization = F
mode = transfer
nonlinear = pk
halofit_version = mead
neutrino_hierarchy = normal
kmax = 20.0
zmid = 2.0
nz_mid = 100
zmax = 6.0
nz = 150
background_zmax = 6.0
background_zmin = 0.0
background_nz = 6000

[approximate_P_gm]
file = ./modules/P_gm_approx/p_gm_approx_interface.py
b2_coefficient_file = ./modules/P_gm_approx/parameter_gridfit_b2.dat
g2_coefficient_file = ./modules/P_gm_approx/parameter_gridfit_g2.dat
g3_coefficient_file = ./modules/P_gm_approx/parameter_gridfit_g3.dat
z_sep = 0.5

[extrapolate_power]
file = ./cosmosis-standard-library/boltzmann/extrapolate/extrapolate_power.py
kmax = 500.0

[load_nz_fits]
file = ./cosmosis-standard-library/number_density/load_nz_fits/load_nz_fits.py
nz_file = runs/mocks/magnification/mag_nE_magnification_alpha_3.0/data/KiDS/twoPoint_PneE+PeeE_mean_None_cov_theoryBuceros_nOfZ_bucerosBroad_mock_noiseless.fits
data_sets = SOURCE LENS

[source_photoz_bias]
file = ./cosmosis-standard-library/number_density/photoz_bias/photoz_bias.py
mode = additive
sample = nz_SOURCE
bias_section = nofz_shifts
interpolation = linear

[magnification_alphas]
file = ./utils/magnification_alphas.py
alphas = 3.0 3.0

[projection]
file = ./cosmosis-standard-library/structure/projection/project_2d.py
ell_min = 10.0
ell_max = 30000.0
n_ell = 400
position-shear = LENS-SOURCE
magnification-shear = LENS-SOURCE
verbose = F
get_kernel_peaks = F

[add_magnification]
file = ./utils/add_magnification.py
position-shear = T

[bandpower_ggl]
file = ./cosebis/libbandpower.so
type = ggl
response_function_type = tophat
analytic = 1
output_section_name = bandpower_galaxy_shear
l_min = 100.0
l_max = 1500.0
nbands = 8
apodise = 1
delta_x = 0.5
theta_min = 0.5
theta_max = 300.0
output_foldername = ./cosebis/BandPower_outputs/

[scale_cuts]
file = ./modules/scale_cuts/scale_cuts.py
output_section_name = theory_data_covariance
data_and_covariance_fits_filename = runs/mocks/magnification/mag_nE_magnification_alpha_3.0/data/KiDS/twoPoint_PneE+PeeE_mean_None_cov_theoryBuceros_nOfZ_bucerosBroad_mock_noiseless.fits
use_stats = PneE
cut_pair_pnee = 1+1 2+1 2+2 2+3
keep_ang_peee = 100 1500
keep_ang_pnee = 100 1070
xi_plus_extension_name = xiP
xi_minus_extension_name = xiM
bandpower_ggl_extension_name = PneE
bandpower_e_cosmic_shear_extension_name = PeeE
cosebis_extension_name = En
xi_plus_section_name = shear_xi_plus_binned
xi_minus_section_name = shear_xi_minus_binned
bandpower_ggl_section_name = bandpower_galaxy_shear
bandpower_e_cosmic_shear_section_name = bandpower_shear_e
cosebis_section_name = cosebis
simulate = F
simulate_with_noise = T
mock_filename = 

[2x2pt_like]
file = ./utils/mini_like.py
input_section_name = theory_data_covariance
like_name = 2x2pt_like

